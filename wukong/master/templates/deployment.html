<script>
    var current_application = "{{ app.id }}";
</script>
<script type="text/javascript" src="/static/js/deployment.js"></script>

<!-- optional, displays current wukong master status (e.g. mapping) -->
<!-- could use polling to update in real time -->
<div class="wukong-status">
  <h1 id="msg"></h1>
</div>

<div id='wrapper'>
    <div class=row-fluid>
        <div class="span12">
            <div class=tabbable>
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#fbp" data-toggle="tab">Application Editor</a></li>
                    <li class="disabled"  style="display:none"><a href="#policy" data-toggle="tab">User policy editor</a></li>
                    <li><a id="deployment-tab" href="#deploy" data-toggle="tab">Deployment</a></li>
                </ul>
                <div class=tab-content>
                    <div class="tab-pane active" id="fbp">
                        <div class="img-rounded" style="height: 100%; padding: 10px; overflow:hidden"><iframe style="overflow:hidden" width="100%" height="1000" src="/applications/{{ app_id }}/fbp/load"></iframe></div>
                    </div>
                    <div class="tab-pane" id="policy">
                        <h1>Under construction</h1>
                    </div>
                    <div class="tab-pane" id="deploy">

                        <div class=tabbable>
                            <ul class="nav nav-pills">
                                <li><a id="nodes-btn" href="#nodes" data-toggle="tab">Current Nodes</a></li>
                                <li><a id="mapping_results-btn" href="#mapping_results" data-toggle="tab">Map</a></li>
                                <!-- deployment.js will reveal deploy-btn depending on mapping result -->
                                <li style="display: none;"><a id="deploy-btn" href="#deploy_results" data-toggle="tab">Deploy</a></li>
                            </ul>
                            <div class=tab-content>
                                <div class="tab-pane" id="nodes">
                                    <h1>Loading</h1>
                                    {# include "monitor-nodes.html" #}
                                </div>
                                <div class="tab-pane" id="mapping_results">
                                    {% include "monitor-mapping-results.html" %}
                                </div>
                                <div class="tab-pane" id="deploy_results">
                                    <div id="deploy-progress">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
